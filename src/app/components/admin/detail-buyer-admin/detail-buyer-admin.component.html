<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button style="color: white !important"></ion-back-button>
    </ion-buttons>
    <ion-title>
      Detalles
    </ion-title>
  </ion-toolbar>
</ion-header>
<ion-content padding>
  <ion-grid fixed>
    <ng-container *ngIf="isLoad; then thenTemplate; else elseTemplate"></ng-container>
    <ng-template #thenTemplate>
      <h1> Detalles de Consumidor </h1>

      <ion-card>


        <ion-card-header>
          <ion-card-subtitle> {{buyer.name}} {{buyer.fatherLastName}} </ion-card-subtitle>
          <ion-card-subtitle> Edad {{buyer.years}} </ion-card-subtitle>
          <ion-card-title> {{buyer.name}} </ion-card-title>
        </ion-card-header>
        <!-- Principales -->
        <ion-grid>
          <ion-row>
            <ion-col>
              <!-- Renta/venta -->
              <ion-chip *ngIf="buyer.isRenter" style="background-color: #F58634">
                <ion-chip-icon class="icon-chip-detail" name="cart"></ion-chip-icon>
                <ion-label>Renta</ion-label>
              </ion-chip>
              <ion-chip *ngIf="!buyer.isRenter" style="background-color: #F58634">
                <ion-chip-icon class="icon-chip-detail" name="cart"></ion-chip-icon>
                <ion-label>Venta</ion-label>
              </ion-chip>
            </ion-col>
            <ion-col>
              <ion-chip style="background-color: #F58634">
                <ion-chip-icon class="icon-chip-detail" name="expand"></ion-chip-icon>
                <ion-label><b>{{buyer.space}}</b> Espacio </ion-label>
              </ion-chip>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-chip style="background-color: #F58634">
                <ion-chip-icon class="icon-chip-detail" name="calendar"></ion-chip-icon>
                <ion-label>Fecha <b>{{buyer.dateToBuy}}</b></ion-label>
              </ion-chip>
            </ion-col>
            <ion-col>
              <ion-chip style="background-color: #F58634">
                <ion-chip-icon class="icon-chip-detail" name="water"></ion-chip-icon>
                <ion-label><b>{{buyer.numBathrooms}}</b> Baños </ion-label>
              </ion-chip>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-chip style="background-color: #F58634">
                <ion-chip-icon class="icon-chip-detail" name="cash"></ion-chip-icon>
                <ion-label>Max <b>${{buyer.maxPrice}}</b></ion-label>
              </ion-chip>
            </ion-col>
            <ion-col>
              <ion-chip style="background-color: #F58634">
                <ion-chip-icon class="icon-chip-detail" name="cash"></ion-chip-icon>
                <ion-label>Min <b> ${{buyer.minPrice}}</b></ion-label>
              </ion-chip>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-chip style="background-color: #F58634">
                <ion-chip-icon class="icon-chip-detail" name="car"></ion-chip-icon>
                <ion-label><b>{{buyer.numCars}}</b> Estacionamiento </ion-label>
              </ion-chip>
            </ion-col>
            <ion-col>
              <ion-chip style="background-color: #F58634">
                <ion-chip-icon class="icon-chip-detail" name="bed"></ion-chip-icon>
                <ion-label><b>{{buyer.numRooms}}</b> Cuartos </ion-label>
              </ion-chip>
            </ion-col>
          </ion-row>
        </ion-grid>
        <!-- otros -->
        <ion-card-subtitle style="margin-left: 8%;">Otras</ion-card-subtitle>
        <div class="container-details-buyer">
          <ion-item *ngIf="buyer.allServices">
            <ion-icon style="color:  #F5811E" name="radio-button-on"></ion-icon>
            <ion-label>Todos los servicios</ion-label>
          </ion-item>
          <ion-item *ngIf="!buyer.allServices">
            <ion-icon style="color:  #F5811E" name="radio-button-on"></ion-icon>
            <ion-label>Sin los servicios</ion-label>
          </ion-item>
          <ion-item *ngIf="buyer.hasElevator">
            <ion-icon style="color:  #F5811E" name="radio-button-on"></ion-icon>
            <ion-label>Elevador</ion-label>
          </ion-item>
          <ion-item *ngIf="!buyer.hasElevator">
            <ion-icon style="color:  #F5811E" name="radio-button-on"></ion-icon>
            <ion-label>Sin Elevador</ion-label>
          </ion-item>
          <ion-item *ngIf="buyer.hasGarden">
            <ion-icon style="color:  #F5811E" name="radio-button-on"></ion-icon>
            <ion-label>Jardin</ion-label>
          </ion-item>
          <ion-item *ngIf="!buyer.hasGarden">
            <ion-icon style="color:  #F5811E" name="radio-button-on"></ion-icon>
            <ion-label>Sin Jardin</ion-label>
          </ion-item>
          <ion-item *ngIf="buyer.isClose">
            <ion-icon style="color:  #F5811E" name="radio-button-on"></ion-icon>
            <ion-label>Fraccionamineto Cerrado</ion-label>
          </ion-item>
          <ion-item *ngIf="!buyer.isClose">
            <ion-icon style="color:  #F5811E" name="radio-button-on"></ion-icon>
            <ion-label>Sin Fraccionamineto Cerrado</ion-label>
          </ion-item>
          <ion-item *ngIf="!buyer.isOld">
            <ion-icon style="color:  #F5811E" name="radio-button-on"></ion-icon>
            <ion-label>Nuevo</ion-label>
          </ion-item>
          <ion-item *ngIf="buyer.isOld">
            <ion-icon style="color:  #F5811E" name="radio-button-on"></ion-icon>
            <ion-label>Usado</ion-label>
          </ion-item>
          <ion-item *ngIf="buyer.isLowLevel">
            <ion-icon style="color:  #F5811E" name="radio-button-on"></ion-icon>
            <ion-label>Planta Baja</ion-label>
          </ion-item>
          <ion-item *ngIf="!buyer.isLowLevel">
            <ion-icon style="color:  #F5811E" name="radio-button-on"></ion-icon>
            <ion-label>Cualquier num de piso</ion-label>
          </ion-item>
          <ion-item *ngIf="buyer.wayToBuy">
            <ion-icon style="color:  #F5811E" name="radio-button-on"></ion-icon>
            <ion-label text-wrap> Forma de Compra: {{buyer.wayToBuy}}</ion-label>
          </ion-item>
          <ion-item *ngIf="buyer.zone">
            <ion-icon style="color:  #F5811E" name="radio-button-on"></ion-icon>
            <ion-label text-wrap>Zona: {{buyer.zone}}</ion-label>
          </ion-item>
          <ion-item *ngIf="buyer.typeOfProperty">
            <ion-icon style="color:  #F5811E" name="radio-button-on"></ion-icon>
            <ion-label text-wrap>Tipo de Propiedad: {{buyer.typeOfProperty}}</ion-label>
          </ion-item>
          <ion-item *ngIf="buyer.email">
            <ion-icon style="color:  #F5811E" name="radio-button-on"></ion-icon>
            <ion-label text-wrap>Email: {{buyer.email}}</ion-label>
          </ion-item>
          <ion-item *ngIf="buyer.city">
            <ion-icon style="color:  #F5811E" name="radio-button-on"></ion-icon>
            <ion-label text-wrap>Ciudad: {{buyer.city}}</ion-label>
          </ion-item>
        </div>

        <!-- tag -->
        <ion-card-subtitle style="margin-left: 8%;">Etiquetas</ion-card-subtitle>
        <div class="container-details-buyer">
          <div *ngFor="let tag of buyer.tag">
            # {{tag }}
          </div>
        </div>


      </ion-card>
      <h1 *ngIf="buyer.statusBuyerProperty && buyer.statusBuyerProperty.length > 0"> Propiedades que le interesan </h1>
      <ion-card *ngFor="let sbp  of buyer.statusBuyerProperty " [ngClass]="{'state-verde': sbp.status === 'verde', 
        'state-amarillo': sbp.status === 'amarillo',
        'state-rojo': sbp.status === 'rojo',
        'state-azul': sbp.status === 'azul' }">
        <ion-card-header>
          <ion-card-subtitle>Fecha {{formatDates(sbp.timestamp)}}</ion-card-subtitle>
          <ion-card-title>{{sbp.property.name}}</ion-card-title>
        </ion-card-header>
      </ion-card>
      <!-- citas -->
      <h1 *ngIf="buyer.schedule && buyer.schedule.length > 0"> Citas </h1>
      <ion-card *ngFor="let schedule  of buyer.schedule " [ngClass]="{'state-verde': schedule.status === 'verde', 
        'state-amarillo': schedule.status === 'amarillo',
        'state-rojo': schedule.status === 'rojo',
        'state-azul': schedule.status === 'azul' }">
        <ion-item>
          <ion-label>Propiedad {{schedule.property.name}}</ion-label>
        </ion-item>
        <ion-item>
          <ion-label>Fecha {{schedule.day}}/{{schedule.month + 1}}/{{schedule.year}}</ion-label>
        </ion-item>
        <ion-item text-wrap>Hora: {{formatHours(schedule.hour, schedule.minute)}}</ion-item>
        <ion-item>
          <ion-label>Lugar {{schedule.address}}</ion-label>
        </ion-item>
      </ion-card>
      <!-- Ofertas -->
      <h1 *ngIf="buyer.ofert && buyer.ofert.length > 0"> Ofertas </h1>
      <ion-card *ngFor="let ofert  of buyer.ofert " [ngClass]="{'state-verde': ofert.status === 'verde', 
         'state-amarillo': ofert.status === 'amarillo',
         'state-rojo': ofert.status === 'rojo',
         'state-azul': ofert.status === 'azul' }">
        <ion-item>
          <ion-label>Propiedad {{ofert.property.name}}</ion-label>
        </ion-item>
        <ion-item>
          <ion-label>Fecha {{formatDates(ofert.timestamp)}}</ion-label>
        </ion-item>
        <ion-item>
          <ion-label>Precio {{ofert.ofertPrice}}</ion-label>
        </ion-item>
        <ion-card-content>
          Notas {{ofert.notes}}
        </ion-card-content>
      </ion-card>
      <!-- credito -->
      <h1 *ngIf="credits && credits.length > 0"> Crédito </h1>
      <ion-card *ngFor="let credit  of credits " [ngClass]="{'state-verde': credit.status === 'verde', 
          'state-amarillo': credit.status === 'amarillo',
          'state-rojo': credit.status === 'rojo',
          'state-azul': credit.status === 'azul',
            'state-secondary': !credit.status }">
        <ion-item>
          <ion-label>Propiedad {{credit.property.name}}</ion-label>
        </ion-item>
        <ion-item>
          <ion-label>Fecha {{formatDates(credit.timestamp)}}</ion-label>
        </ion-item>
        <ion-card-content>
          Notas {{credit.notes}}
        </ion-card-content>
      </ion-card>


    </ng-template>
    <ng-template #elseTemplate style="text-align: center">
      <ion-spinner name="bubbles"></ion-spinner>

    </ng-template>
  </ion-grid>

</ion-content>